<!DOCTYPE html>
<html>
<head>
  <meta charset="utf8">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, maximum-scale=1">

  <title>Munchful Table</title>

  <link rel="stylesheet" href="/components/supersonic/css/supersonic.css">
  <link rel="stylesheet" href="/stylesheets/application.css">
  <link rel="import" href="/components/supersonic/components/import.html">

  <script src="http://localhost/cordova.js"></script>
  <script src="/components/steroids-js/steroids.js"></script>
  <script src="/components/angular/angular.js"></script>
  <script src="/components/hammerjs/hammer.js"></script>
  <script src="/components/ryanmullins-angular-hammer/angular.hammer.js"></script>
  <script src="/components/supersonic/supersonic.js"></script>
  <script src="/components/webcomponentsjs/webcomponents.js"></script>

  <script src="/scripts/application.js"></script>
</head>
<body ng-app="SteroidsApplication">
<div ng-controller="IndexController">
  <!-- <div id="radial-menu" style="left:{{radialLeft}}px;top:{{radialTop}}px" ng-show="panOn"></div> -->
  <button id="cursor" class="round-button" style="background:{{cursorBg}};left:{{mx}}px;top:{{my}}px" ng-show="panOn"></button>
  <div class="player-container">
    <div ng-repeat='player in players' style="left:{{player.position[0]}}px;bottom:{{player.position[1]}}px;-webkit-transform:rotate({{player.position[2]}}deg);" class="mp-box" ng-click='playerSheet($index); currentPlayer = $index' hm-panstart="radialOn(player)" hm-pan="flmouse(player)" hm-panend="positionCheck(player)" ng-show='player.active'>
      <svg version="1.1" x="0" y="0" viewBox="0 0 200 170">
        <ellipse fill="{{player.color[0]}}" cx="100" cy="90" rx="100" ry="80"></ellipse>
        <ellipse fill="{{player.color[1]}}" cx="100" cy="56" rx="56" ry="56"></ellipse>
      </svg>
      <table class="mp-counters">
        <tr>
          <td class="mp-level">{{player.lvl}}</td>
        </tr>
        <tr>
          <td class="mp-gear">{{player.lvl + player.gear}}</td>
        </tr>
      </table>
    </div>
  </div>

  <overlay ng-show="panOn"></overlay>
  <div class="vs-icon" ng-click="inCombat = true">
    <img src="/assets/vs.png"/>
  </div>
  <panon-table id='panon-table' class="{{panOn ? 'panon-table-up' : ''}}" style="border:1vw solid {{cursorBg}};">
    <div id='vs-icon' class="vs-icon panon-table">
      <img src="/assets/vs.png"/>
    </div>
    <button style="background:{{cursorBg}}" id='lvl-up' class="player-button level-up">
      <img src="/assets/lvlup.png"/>
    </button>
    <button style="background:{{cursorBg}}" id='lvl-down' class="player-button level-down">
      <img src="/assets/lvldown.png"/>
    </button>
    <button style="background:{{cursorBg}}" id='gear-up' class="player-button gear-up">
      <img src="/assets/gearup.png"/>
    </button>
    <button style="background:{{cursorBg}}" id='gear-down' class="player-button gear-down">
      <img src="/assets/geardown.png"/>
    </button>

    <div id='trash-zone' class="trash-zone">
      <img src="/assets/trashcan.png"/>
    </div>
    <!-- <button id='gear-down' class="player-button gear-down">-1</button> -->
  </panon-table>

  <!-- Combat/Sheet Table -->
  <div class="{{inCombat || inPlayer ? 'open-table' : ''}} table">
    <div class="close-icon" ng-show="inCombat || inPlayer" ng-click="inCombat = false; inPlayer = false">x</div>
    <div class="combat-container" ng-show="inCombat">
      <table class="combat-box">
        <tr>
          <td class="combat-decrement">
            <button class="round-button" ng-click="playerBonus = playerBonus - 1">-1</button>
            <button class="round-button" ng-click="playerBonus = playerBonus - 5">-5</button>
          </td>
          <td class="combat-power" style="color:{{combatants[0].color[0]}}">{{combatants[0].lvl + combatants[1].lvl + combatants[2].lvl + combatants[3].lvl + combatants[4].lvl + combatants[5].lvl + combatants[0].gear + combatants[1].gear + combatants[2].gear + combatants[3].gear + combatants[4].gear + combatants[5].gear + playerBonus}}</td>
          <td class="combat-increment">
            <button class="round-button" ng-click="playerBonus = playerBonus + 1">+1</button>
            <button class="round-button" ng-click="playerBonus = playerBonus + 5">+5</button>
          </td>
        </tr>
        <tr>
          <td colspan="3">
            <button class="round-button fight-button" ng-repeat="combatant in combatants" hm-pan="combatRemove(combatant)" style="background:{{combatant.color[0]}}">{{combatant.lvl}}</button>
          </td>
        </tr>
      </table>
        <img class="combat-icon" src="/assets/vs.png"/>
      <table class="combat-box">
        <tr>
          <td colspan="3">
            <img src="/assets/{{monsterTier()}}.png" class="round-button fight-button" style="top: 1.5vw;position:relative" />
          </td>
        </tr>
        <tr>
          <td class="combat-decrement">
            <button class="round-button" ng-click="monsterPower = monsterPower - 1">-1</button>
            <button class="round-button" ng-click="monsterPower = monsterPower - 5">-5</button>
          </td>
          <td class="combat-power">{{monsterPower}}</td>
          <td class="combat-increment">
            <button class="round-button" ng-click="monsterPower = monsterPower + 1">+1</button>
            <button class="round-button" ng-click="monsterPower = monsterPower + 5">+5</button>
          </td>
        </tr>
      </table>
    </div>
    <div ng-show="inPlayer">
      <table>
        <tr>
          <td style="width:35%"></td>
          <td style="width:30%">
            <br/>
            <svg version="1.1" x="0" y="0" viewBox="0 0 236.3 261.9">
              <path fill="{{players[currentPlayer].color[0]}}" d="M118.1,89.8c65.2,0,118.1,48.4,118.1,108.1c0,28.9-52.9,64.1-118.1,64.1S0,224.4,0,197.9C0,138.2,52.9,89.8,118.1,89.8z"></path>
              <circle fill="{{players[currentPlayer].color[1]}}" cx="118.1" cy="66.2" r="66.2"></circle>
            </svg>
          </td>
          <td style="width:35%"></td>
        </tr>
        <tr>
          <td colspan="3">
            <button class="round-button" ng-repeat="color in colors" style="background:{{color[0]}}" ng-click="players[currentPlayer].color = color"></button>
          </td>
        </tr>
        <tr>
          <td><button class="round-button" ng-click="players[currentPlayer].lvl = players[currentPlayer].lvl - 1">-1</button></td>
          <td class="lg-number">{{players[currentPlayer].lvl}}</td>
          <td><button class="round-button" ng-click="players[currentPlayer].lvl = players[currentPlayer].lvl + 1">+1</button></td>
        </tr>
        <tr>
          <td><button class="round-button" ng-click="players[currentPlayer].gear = players[currentPlayer].gear - 1">-1</button></td>
          <td class="lg-number">{{players[currentPlayer].gear}}</td>
          <td><button class="round-button" ng-click="players[currentPlayer].gear = players[currentPlayer].gear + 1">+1</button></td>
        </tr>
        <tr>
          <td colspan="3">
            <button ng-hide="players[currentPlayer].active" ng-click="players[currentPlayer].active = true; inPlayer = false" class="button button-positive">Add</button>
            <button ng-show="players[currentPlayer].active" ng-click="players[currentPlayer].active = false; inPlayer = false" class="button button-assertive">Remove</button>
          </td>
        </tr>
      </table>
      <div class="sheet-meepo">
      </div>
    </div>
  </div>

</div>

</body>
</html>
